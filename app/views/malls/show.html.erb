<script src="//maps.google.com/maps/api/js?key=AIzaSyDoCKNEr65ZO2JvpuIbofP7cn8p3pqFJP4"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>

<div class="header_show">
  <h1><%=@mall.name%></h1>
  <!-- <p><%#=@mall.description%></p> -->
  <p>Open between
    <%= @mall.opening_time.strftime('%H:%M:%p') %>
    and
    <%= @mall.closing_time.strftime('%H:%M:%p') %></p>
 <!-- <p>
    <i class="fa fa-phone contact_phone" aria-hidden="true"></i>
    <%=@mall.phone_no%></p>
  <p>
    <i class="fa fa-envelope-o contact_email" aria-hidden="true"></i>
    </p> -->
</div>
<br><hr>
 


  <div class="row">
    <% @rooms.each do |room| %>
    <!-- First column -->
     <div class="col-sm-4 mall_room">
     <div class="card animated fadeInLeft text-center">
       
        <%if room.name == ""%>
        <img class="card-img-top img-responsive" src="https://previews.123rf.com/images/carmenbobo/carmenbobo1504/carmenbobo150400069/38945966-Rubber-stamp-with-word-vacant-inside-vector-illustration-Stock-Vector.jpg"  style="height:200px; width:300px;" alt="card image">
        <%else%>
        <%= image_tag room.storeimage_url.to_s, class: "store_image img-responsive"%>
        <%end%>
        <div class="card-block">
        <h1 class="card-title">
          <%= room.name %>
        </h1>
      </div>
      <div class="mall_room_link">
        <%= link_to mall_room_path(room.mall_id,room) do%>
        <button class="btn btn-default">Check it Out</button>
        <%end%>
      </div>
        <br>
     </div>
    </div>  
    <% end %>
  </div>
  <hr>
 


<div class="map">
  <div id="map" class="map"></div>
</div>


<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({
    provider: {},
    internal: {
      id: 'map'
    }
  }, function () {
    markers = handler.addMarkers(<%=raw @hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });

  $('.star-rating').raty({
    path: '/assets/',
    readOnly: true,
    score: function() {
      return $(this).attr("data-score"):
    }
  })
</script>
