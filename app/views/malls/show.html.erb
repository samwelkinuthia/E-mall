<div class="row header_show" style="  background: linear-gradient( rgba(14, 41, 69, 0.9), rgba(0, 0, 0, 0.4)), url(<%=@mall.mallpicture_url.to_s%>)no-repeat center;">
  <h1><%=@mall.name%></h1>
  <p><%=@mall.description%></p>
  <p>Open between
    <%= @mall.opening_time.strftime('%H:%M%p') %>
    and
    <%= @mall.closing_time.strftime('%H:%M%p') %></p>
  <p>
    <i class="fa fa-phone contact_phone" aria-hidden="true"></i>
    <%=@mall.phone_no%></p>
  <p>
    <i class="fa fa-envelope-o contact_email" aria-hidden="true"></i>
    <%=@mall.email%></p>
</div>
<!-- <div class="container">
  <div class="col-md-6">
    <div class="container">
      <h3>Add your Store.</h3>
      <%#=render 'rooms/new'%>
    </div>
  </div>
  <div class="col-md-6">
    <div class="row">
      <h3>Add events at
        <%=@mall.name%></h3>
      <%#=render 'events/form'%>
    </div>
    <div class="row">
      <h3>Add
        <%=@mall.name%>
        features</h3>
      <%#= render 'features/form'%>
    </div>
  </div>
</div> -->

<div class="mall_images">
  <div class="row">
    <%if @mall_attachments.any?%>
    <h1>Sneak Peek</h1>
    <%@mall_attachments.each do |m|%>
    <div class="col-md-4 col-xs-12">
      <%=image_tag m.avatar_url, class: "img-responsive mall_attachment animated infinite pulse"%>
    </div>
    <%end%>
    <%else%>
    <h1>add images when adding mall</h1>
    <%end%>
  </div>
</div>

<%#= link_to 'Edit', edit_mall_path(@mall) %>
<%#= link_to 'Back', malls_path %>

<div class="container">
  <div class="row mall_rooms">
    <div class="page-header">
      <h1>Available Stores</h1>
    </div>
    <% @rooms.each do |room| %>
    <div class="col-md-4 col-xs-12 mall_room">
      <div class="room_tile">
        <div class="room_image">
          <%if room.occupied == false%>
          <%=image_tag('vacant.jpg', class: "store_image")%>
          <%else%>
          <%= image_tag room.storeimage_url.to_s, class: "store_image img-responsive"%>
          <%end%>
        </div>
        <div class="room_detail">
          <%if room.occupied == true%>
          <h3>
            <%= room.name %>
          </h3>
          <%= link_to mall_room_path(room.mall_id,room) do%>
          <button class="btn btn-default">Check it Out</button>
          <%end%>
          <%elsif room.occupied == false%>
          <h3 class="vacant">
            Vacant
          </h3>
          <%= link_to mall_room_path(room.mall_id,room) do%>
          <button class="btn btn-default" id="vacant">View This Space</button>
          <%end%>
          <%end%>
        </div>
      </div>
    </div>
    <% end %>
  </div>
</div>

<div class="map">
  <div id="map" class="map"></div>
</div>

<script src="//maps.google.com/maps/api/js?key=AIzaSyDoCKNEr65ZO2JvpuIbofP7cn8p3pqFJP4"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script type="text/javascript">
  $(document).ready(function () {
    handler = Gmaps.build('Google');
    handler.buildMap({
      provider: {},
      internal: {
        id: 'map'
      }
    }, function () {
      markers = handler.addMarkers(<%=raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
  });
</script>
